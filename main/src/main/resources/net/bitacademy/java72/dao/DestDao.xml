<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.bitacademy.java72.dao.DestDao">
	<resultMap type="Dest" id="DestMap">
		<id column="meet_no" property="meet_no" />
		<result column="cate_no" property="cate_no" />
		<result column="cate_nm" property="cate_nm" />
		<result column="spec_nm" property="spec_nm" />
		<result column="spec_no" property="spec_no" /> <!--  -->
		<result column="comp_no" property="comp_no" />
		<result column="spec_vl" property="spec_vl" />
		<result column="comp_nm" property="comp_nm" />
	</resultMap>

	<insert id="insert" parameterType="Dest">
		insert into rcmd_cate_tb
		(meet_no,cate_no)
		values(#{meet_no},(select cate_no from cate_tb where
		cate_nm=#{cate_nm}));
	</insert>

	<select id="list" parameterType="Dest" resultMap="DestMap">
		select spec_nm,t1.cate_no
		from spec_tb t1
		left outer join cate_tb t2 on t1.cate_no=t2.cate_no
		where t2.cate_nm=#{cate_nm};
	</select>

	<insert id="insertSpec" parameterType="Dest">
		insert into comp_spec_tb
		(spec_no,comp_no,spec_vl)
		values ((select spec_no from spec_tb where cate_no=#{cate_no} and
		spec_nm=#{spec_nm}),
		(select comp_no from comp_tb where comp_nm=#{comp_nm}),#{spec_vl});
	</insert>

</mapper>

















