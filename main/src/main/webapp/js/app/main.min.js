define(["jquery","app/common","bootstrap"],function(e){function t(){console.log("MY> Login()..Excute..!!"),FB.login(function(e){e.authResponse?i():console.log("User cancelled login or did not fully authorize.")},{scope:"public_profile,email,user_photos,user_friends"})}function o(t,o){e.ajax(contextRoot+"/json/member/insert.do",{method:"POST",dataType:"json",data:{name:t.name,email:t.email,userId:t.id,getSite:"FACEBOOK",imgUrl:t.picture.data.url},success:function(){console.log("FACEBOOK User Info Insert..!!"),"function"==typeof o&&o()}})}function n(t,o){e.ajax(contextRoot+"/json/member/update.do",{method:"POST",dataType:"json",data:{name:t.name,email:t.email,userId:t.id,getSite:"FACEBOOK",imgUrl:t.picture.data.url},success:function(){console.log("FACEBOOK User Info Update..!!"),"function"==typeof o&&o()}})}function s(t,s){e.ajax(contextRoot+"/json/member/fbExist.do",{method:"POST",dataType:"json",data:{userId:t.id},success:function(e){"yes"==e.data?(console.log("User Exist..!!"),n(t,s)):(o(t,s),console.log("User No..!!"))}})}function i(){FB.api("/me?fields=name,email,picture,friends",function(t){s(t,c),e("#sideUserName").text(t.name),e("#sideUserImg").attr("src",t.picture.data.url),e("#headUserName").text(t.name),e("#headUserImg").attr("src",t.picture.data.url),e("#sideLoginInfo").show(),e("#headLoginInfo").show(),e("#sideLoginForm").hide(),e("#headLoginForm").hide()})}console.log("==>main.js Excute..!!"),e("#menuToggle").click(function(t){t.preventDefault(),console.log("mesnuToggle"),e("#wrapper").toggleClass("toggled")}),e("#companyMenu").click(function(t){t.preventDefault(),e("#content").load("html/company.html")}),e("#homeMenu").click(function(t){t.preventDefault(),e("#content").load("html/home.html")}),e("#meetMenu").click(function(t){t.preventDefault(),e("#sidebar-item1-title > b").text("모임을 만드세요."),e("#sidebar-item1-content").load("html/meet_side.html"),e("#content").load("html/meet_list.html")}),e(document).on("enterMeet",function(){e("#destMenu").trigger("click")}),e("#destMenu").click(function(t){t.preventDefault(),e("#sidebar-item1-content").load("html/dest_spec_search.html"),e("#content").load("html/dest.html")}),e("#startMenu").click(function(t){t.preventDefault(),e("#sidebar2 #sidebar2-title-text").text("출발지 설정"),e("#sidebar2-item1-title").text("출발지를 입력하세요."),e("#content").load("html/start.html")}),e("#resultMenu").click(function(t){t.preventDefault(),e("#sidebar-item1-content").load("html/result_side.html"),e("#content").load("html/result_jh.html")}),e("#loginSuccess").click(function(){console.log("login"),e("#sideLoginInfo").toggle(),e("#sideLoginForm").toggle(),e("#headLoginInfo").toggle(),e("#headLoginForm").toggle()}),function(e){e.getQuery=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",o=new RegExp(t),n=o.exec(window.location.href);return null!==n?n[1]:!1}}(jQuery),e(function(){var t=e.getQuery("meetNo");if(t!==!1){sessionStorage.setItem("meetNo",t),console.log("session meetNo",sessionStorage.getItem("meetNo")),e("#startMenu").trigger("click");var o=sessionStorage.getItem("sessionStatus");"false"===o&&e("#btnFBLogin").trigger("click")}}),e("#btnFBLogin").click(function(){t()}),e("#logout").click(function(){console.log("logout clicked!! "),FB.api("/me/permissions","DELETE",function(e){console.log("delete"),console.log(e)}),FB.logout(function(){document.location.reload()})}),window.fbAsyncInit=function(){FB.init({appId:FacebookAppId,status:!0,cookie:!0,xfbml:!0}),FB.Event.subscribe("auth.authResponseChange",function(e){"connected"===e.status?(console.log("connected to FACEBOOK"),i(),sessionStorage.setItem("sessionStatus",!0),sessionStorage.getItem("meetNo")&&console.log("meetNo : "+sessionStorage.getItem("meetNo"))):"not_authorized"===e.status?(console.log("not_authorized"),sessionStorage.setItem("sessionStatus",!1)):(console.log("logged out"),sessionStorage.setItem("sessionStatus",!1))})};var c=function(){FB.api("/me?fields=name,email,picture,friends",function(t){e.ajax(contextRoot+"/json/member/fbGetUser.do",{method:"POST",dataType:"json",data:{userId:t.id},success:function(e){console.log("FACEBOOK User Info GET..!!"),sessionStorage.setItem("member",JSON.stringify(e.member)),console.log(e)}})})};!function(e){var t,o="facebook-jssdk",n=e.getElementsByTagName("script")[0];e.getElementById(o)||(t=e.createElement("script"),t.id=o,t.async=!0,t.src="//connect.facebook.net/en_US/all.js",n.parentNode.insertBefore(t,n))}(document)});
//# sourceMappingURL=main.min.js.map
